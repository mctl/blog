## 关于前端重构代码的一点看法

最近 review 了新同事的重构代码，当时脑子里就一个念头：卧槽。

直观的说就是一堆屎山，重构成了另一堆屎山。原来是因为代码太乱，而且 redux 用的太多，完全无法维护，重构计划是用 hooks 组件，重新梳理代码结构和逻辑。

想法是好的，但结果太离谱了，由此产生一些想法...

在前端领域，重构应该是无法避免的，产品需求多，技术迭代快，很多代码过几年就得重构一遍，我经历过的就有从 angular js 到 react；从 angular js 到 angular 6；拆分巨石应用，在子应用中重构。

另外早期的 jq、jsp 项目就不说了，还想继续发展，迟早得重构。

但从产品的角度来说，没人关心你实现的技术是什么，重构带不来任何多余的收益，重构好了是正常，出 bug 就是你的问题，所以关心重构的肯定是技术人员，只有我们才会考虑这些问题。

如何说服领导接受重构的风险是第一个问题，但这里就不多展开了。

从技术的角度看，重构一定是因为原来项目的问题已经无法忽视，原因有很多，比如：

1. 历史包袱，逐渐堆成了屎山，无法维护
2. 性能瓶颈，无法在现有框架内优化
3. 无法满足新增业务

总归是有很直接的原因，所以重构首先得解决这些问题，其次是考虑后期的维护、扩展等...明白这些问题倒也简单，找问题谁都会，重要的是解决问题。

而解决问题最关键的是人，就人选来说，新手肯定不适合，难免出现我开头碰到的问题，从一堆屎山到另一堆没有任何意义；

那就得找一个有经验有能力的，最好是能熟悉业务的人，但这种人难道没其他更重要的事干吗？

项目核心业务、工程化相关、构建、部署、代码 review 等等，哪个不得老鸟来，所以重构问题到最后就是人的问题了。

有能力重构的不一定有时间，而有时间的不一定有能力，而关键点就在于，重构的要求肯定是高于原本项目的，否则没有意义。

如何做的比原来好呢？

1. 需求更明确
2. 框架更给力
3. 实现人员能力更强

需求更明确这是必然的，也是重构最大的优势；框架的话，有一定差异，但目前似乎没有哪个框架能够毫无悬念的胜出；而实现人员，最起码不能比原来的差，否则效果很难保证。

要想重构效果佳，往后能多用几年，还是需要靠谱的人，但是项目多了，摊子铺的大了，有没有合适的人选真不一定。

综上，我认为最好是有空闲，又愿意做的靠谱人员，行云流水一套重构下来，设计、文档、注释俱全，代码质量较好；其次是勉强能胜任的，多加关注，时刻注意发展方向，及时 review 代码。
